!function(e){"use strict";e.fn.multiAccordion=function(){e(this).addClass("ui-accordion ui-accordion-icons ui-widget ui-helper-reset").find("h3").addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-top ui-corner-bottom").hover(function(){e(this).toggleClass("ui-state-hover")}).prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>').click(function(){return e(this).toggleClass("ui-accordion-header-active ui-state-active ui-state-default ui-corner-bottom").find("> .ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").end().next().toggleClass("ui-accordion-content-active").slideToggle(100),!1}).next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").css("display","block").hide().end().trigger("click")}}(jQuery),function(e){"use strict";var t={timer:0,submit:"#wpa-submit",message:function(n,i){var a=e(".wpa-message-"+n);i&&a.html(i);var o="message-aleady";clearTimeout(t.timer),a.show(),a.addClass("slideInDown"),a.hasClass(o)||(t.timer=setTimeout(function(){a.addClass("slideOutUp"),setTimeout(function(){a.removeClass("slideInDown"),setTimeout(function(){a.removeClass("slideOutUp"),a.hide()},1e3)},1e3)},1600))},init:function(){window.addEventListener("hashchange",t.changeOnHash,!1),e(".acoordion").multiAccordion({animate:100,autoHeight:!1,heightStyle:"content"}),e("#wpa_tabs").tabs({hide:{effect:"fadeOut",duration:200},show:{effect:"fadeIn",duration:200}}).addClass("ui-tabs-vertical ui-helper-clearfix"),e("#wpa_tabs ul li a").on("click",function(){location.hash=e(this).attr("href"),window.scrollTo(0,0)}),e(".form-group-radiobox").buttonset(),e("#wpa-submit").attr("disabled","disabled"),t.event(),e("#wpa_tabs_hide").remove()},submit_enhanced:function(){e(t.submit).removeAttr("disabled")},changeOnHash:function(){var t=location.hash;e("#wpa_tabs").tabs("enable",t).addClass("ui-tabs-vertical ui-helper-clearfix")},updateOption:function(n){if(n.preventDefault(),!1===t.submit_flag)return!1;t.submit_flag=!1;var i=e(this);e("#wpa_tabs ul").find(".spinner").show();var a=e("#wpa_settings_form").serializeArray();_.each(a,function(e,t){e.name.match(/wpa_supports_check/)&&delete a[t]}),e.ajax({type:"post",url:ajaxurl,data:{action:wpaSETTINGS.action,_wp_nonce:wpaSETTINGS._wp_nonce,form:a},success:function(n){var a=n-0;1===a?(e("#wpa_tabs ul").find(".spinner").hide(),t.message("success"),i.attr("disabled","disabled")):3===a?(e("#wpa_tabs ul").find(".spinner").hide(),t.message("no-update"),i.attr("disabled","disabled")):(e("#wpa_tabs ul").find(".spinner").hide(),t.message("faild")),t.submit_flag=!0}})},openMediaUpload:function(e,n){n.preventDefault();var i=null;return i?(i.open(),!1):(i=wp.media.frames.file_frame=wp.media({title:e.data("uploader_title"),button:{text:e.data("uploader_button_text")},multiple:!1}),i.on("select",function(){var n=i.state().get("selection").first().toJSON();t.submit_enhanced(),e.prev(".wpa-url").val(n.url)}),void i.open())},event:function(){e(document).on("click",t.submit,function(e){t.updateOption(e)}),e(document).on("click",".wpa-browse",function(n){t.openMediaUpload(e(this),n)}),e(document).change(function(){t.submit_enhanced()})}};e(function(){window.wpa=t,t.init()})}(jQuery),function(e){"use strict";e(function(){var t=e("#wpadashboard");e("#dashboard-widgets-wrap").prepend(t),e("#wpa_dashboard_widget").remove()})}(jQuery),function(e){"use strict";var t={insertTarget:"#wpa_admin_menus_list",saveHiddenInput:"#admin_menu_hidden",checkedMenus:"#wpa_admin_menus .adminmenu_hidden_check",menuListTemplateID:"#wpa_admin_menus_template",adminMenu:"#adminmenu li",update:function(){var n=(e(t.checkedMenus),e(".menu-list-item-text_input")),i="",a=0;e.each(n,function(){{var n=e(this).data("menu-id"),o=e(this).closest(".menu-list-item"),u=e(this).val().replace(/\s+/g,"+"),s=o.find(".adminmenu_hidden_check").attr("checked")?0:1,r=o.find(".menu-list-item-target_input").val()?o.find(".menu-list-item-target_input").val():"",d=t.utf8_to_b64(e(this).closest(".menu-list-item").find(".menu-list-item-link_input").val());e(this).closest(".menu-list-item").data("order")}u&&(0===a?(i+=a+"id="+n,i+="&"+a+"text="+u,i+="&"+a+"link="+d,i+="&"+a+"disp="+s,i+="&"+a+"target="+r,i+="&"+a+"order="+a):(i+="&"+a+"id="+n,i+="&"+a+"text="+u,i+="&"+a+"link="+d,i+="&"+a+"disp="+s,i+="&"+a+"target="+r,i+="&"+a+"order="+a),a++)}),e(t.saveHiddenInput).val(i)},deparam:function(n){n=n.substring(n.indexOf("?")+1).split("&");var i,a,o,u={},s=decodeURIComponent;for(o=0;o<n.length;o++)u[o]={};for(a=n.length;a>0;)if(i=n[--a].split("="),i[0]&&"undefined"!==i[0]){var r=i[0];if(!r.match(/\d/g))return u;var d=r.match(/\d/g).join("").trim(),l=s(i[0].match(/\D/g).join(""));"link"==l?u[parseInt(d)][l]=s(i[1].replace(/\+/g," "))?t.b64_to_utf8(s(i[1].replace(/\+/g," "))):s(i[1].replace(/\+/g," ")):"undefined"!=typeof u[parseInt(d)]&&s(i[1].replace(/\+/g," "))&&(u[parseInt(d)][l]=s(i[1].replace(/\+/g," ")))}return e.each(u,function(e){"undefined"==typeof this.id&&delete u[e]}),u},getTarget:function(){return e(t.insertTarget)},getOriginalMenu:function(){return e(adminMenu)},getOriginalMenuArray:function(){var n=t.getOriginalMenu(),i={};return"undefined"==typeof n?!1:(e.each(n,function(t,n){e(this).find(".wp-menu-name").find(".pending-count").remove(),e(this).find(".wp-menu-name").find(".plugin-count").remove();var a=e(this).find(".wp-menu-name").text(),o=e(this).attr("id");i[t]={title:a,id:o}}),i)},setTemplate:function(){t.template=_.template(e(t.menuListTemplateID).html())},getMenus:function(){return{menus:t.getOriginalMenuArray()}},formatMenu:function(e){},getData:function(e){var n=t.deparam(e);return n=_.sortBy(n,function(e){return parseInt(e.order)}),{menus:n}},randomstring:function(e){for(var t="",n=function(){var e=Math.floor(62*Math.random());return 10>e?e:String.fromCharCode(36>e?e+55:e+61)};t.length<e;)t+=n();return t},init:function(n){var i,a,o=t;if(t.settings=n,e(t.menuListTemplateID).length){o.setTemplate(),t.cloneMenu(),i=t.defaults(t.originalAdminMenu),a=n.menus?n.menus:i,t.enhanced(o.getData(a));var u=o.compiled(o.getData(a));o.getTarget().html(u),t.update(),t.event()}else i=t.defaults(),a=n.menus||i,t.enhanced(o.getData(a));e("#admin-menu-hide-css").remove()},cloneMenu:function(){return t.originalAdminMenu=e("#adminmenu").clone(),t.originalAdminMenu},compiled:function(e){return t.template(e)},enhanced:function(n){var i=e("#adminmenu").clone();e("#adminmenu").attr("id","adminmenu_original").hide(),e("#adminmenuwrap").append(i),_.each(n.menus,function(e,n){if(!e.id)return!1;0==i.find("#"+e.id).length&&i.find("#collapse-menu").before('<li id="'+e.id+'" class=" menu-top menu-icon-generic menu-top-first menu-top-last"><a href="" class=" menu-top menu-icon-generic menu-top-first menu-top-last"><div class="wp-menu-image dashicons-before dashicons-admin-generic"><br></div> <div class="wp-menu-name">'+e.text+"</div></a></li>");var a=i.find("#"+e.id);"undefined"!=typeof e.link&&a.children("a").attr("href",e.link),"undefined"!=typeof e.target&&a.children("a").attr("target",e.target),t.settings.user.userflag===!0&&0==e.disp&&a.remove(),a.find(".wp-menu-name").text(e.text),a.attr("data-order",e.order)}),i.html(_.sortBy(i.children(),function(t){return e(t).data("order")||e(t).data("order")+""=="0"?parseInt(e(t).data("order")):100}))},utf8_to_b64:function(e){return window.btoa(unescape(encodeURIComponent(e)))},b64_to_utf8:function(e){return decodeURIComponent(escape(window.atob(e)))},defaults:function(n){var i="",a=0,o=t.originalAdminMenu||_.clone(e(t.adminMenu));return o.children("li").each(function(){var n=e(this).attr("id"),o=e(this).find(".wp-menu-name"),u="",s=e(this).children("a").attr("href")?e(this).children("a").attr("href"):"",r=s?t.utf8_to_b64(s):" ";o.find(".pending-count").remove(),o.find(".plugin-count").remove();var d=e(this).find(".wp-menu-name").text().replace(/(^\s+)|(\s+$)/g,"");d&&(0===a?(i+=a+"id="+n,i+="&"+a+"text="+d,i+="&"+a+"link="+r,i+="&"+a+"target="+u,i+="&"+a+"disp=1",i+="&"+a+"order="+a):(i+="&"+a+"id="+n,i+="&"+a+"link="+r,i+="&"+a+"text="+d,i+="&"+a+"disp=1",i+="&"+a+"target="+u,i+="&"+a+"order="+a)),a++}),i},sortableInit:function(){e("#wpa_admin_menus").sortable({placeholder:"ui-state-highlight",update:function(n,i){e(this).find(".menu-list-item").each(function(n,i){e(i).attr("data-order",n),setTimeout(function(){t.update()},500)})}})},restoreDefaultMenu:function(){var n=t.defaults(t.originalAdminMenu);e(t.saveHiddenInput).val(n);var i=t.compiled(t.getData(n));t.getTarget().html(i)},removeDisable:function(){e("#wpa-submit").removeAttr("disabled")},event:function(){e(document).on("click","#wpa_admin_menus input",function(){t.update()}),e(document).on("click","#wpa_admin_menu_reset",function(n){n.preventDefault();var i=_.template(e("#wpa_admin_menu_dialog").html()),a=i({title:t.settings.dialog.title,context:t.settings.dialog.context});e(t.menuListTemplateID).after(a),e("#admin_menu_dialog").dialog({resizable:!1,width:500,height:440,modal:!0,buttons:{OK:function(){t.restoreDefaultMenu(),t.sortableInit(),e(this).dialog("close")},Cancel:function(){e(this).dialog("close")}}}),t.removeDisable()}),e(document).on("click",'#wpa_admin_menus input[type="checkbox"]',function(){var n=e(this).next().next().data("menu-id"),i=e(this).attr("checked");"checked"===i?e("#"+n).fadeOut():e("#"+n).fadeIn(),t.removeDisable()}),e(document).on("click",".menu-list-item-text",function(n){var i=e(this).closest(".menu-list-item"),a=i.find(".menu-list-item-text_input,.menu-list-item-link_input");i.hasClass("on")?e(this).next(".menu-list-item-text_input").attr("class")!==e(n.target).attr("class")&&(i.removeClass("on"),i.find(".wpa_input-group").addClass("hide"),e(this).text(a.val()),e(this).show(),i.find("button").hide(),a.hide(),t.removeDisable()):(i.addClass("on"),i.find(".wpa_input-group").removeClass("hide"),a.show(),i.find("button").show())}),e(document).on("click",".menu-list-item-remove",function(t){t.preventDefault();var n=e(this).closest(".menu-list-item");n.fadeOut("500"),setTimeout(function(){n.remove()},500)}),e(document).on("click",".menu-list-item-text-save",function(n){n.preventDefault();var i=e(this).closest(".menu-list-item"),a=i.find(".menu-list-item-text_input").val();i.find(".menu-list-item-text").fadeOut().text(a).fadeIn(),i.find(".wpa_input-group").addClass("hide");var o=e(this).prev().data("menu-id");e("#"+o).find(".wp-menu-name").fadeOut().text(a).fadeIn(),e(this).hide(),i.removeClass("on"),t.update(),t.removeDisable()}),e(document).on("click","#add_menu_list_item",function(n){n.preventDefault();var i=_.template(e("#wpa_admin_menu_template").html()),a=i({menu:{order:20,text:" ",id:t.randomstring(8),disp:1}});e(t.insertTarget).append(a)}),e(".menu-list-item-text_input").on("keydown keyup keypress change",function(){e(this).closest(".menu-list-item").find(".menu-list-item-text").text(e(this).val())}),e(document).on("click","#wpa_menu_user_reset",function(n){n.preventDefault(),e("#admin_menu_user option").removeAttr("selected"),t.removeDisable()})}};e(function(){if("undefined"==typeof wpa_ADMIN_MENU)return!1;var n=wpa_ADMIN_MENU||{};window.wpa.adminMenuEditor=t,wpa.adminMenuEditor.init(n),e("body").hasClass("toplevel_page_wpa_options_page")&&e("#wpa_admin_menus").sortable({placeholder:"ui-state-highlight",update:function(n,i){e(this).find(".menu-list-item").each(function(n,i){e(i).attr("data-order",n),setTimeout(function(){t.update()},500)}),t.removeDisable()}})})}(jQuery),function(e){var t={timer:null,init:function(){this.optimize_flag=!0,this.timer=0,t.event()},message:function(n,i){var a=e(".wpa-message-"+n);i&&a.html(i);var o="message-aleady";a.show(),a.addClass("slideInDown"),clearTimeout(t.timer),a.hasClass(o)||(t.timer=setTimeout(function(){a.addClass("slideOutUp"),setTimeout(function(){a.removeClass("slideInDown"),setTimeout(function(){a.removeClass("slideOutUp"),a.hide()},1e3)},1e3)},1600))},countReset:function(t){return t?(t=e(".post-count-"+t),void t.text("0")):!1},optimizeSubmit:function(n){if(n.preventDefault(),!1===this.optimize_flag)return!1;var i=(e("#wpa_optimize"),{revision:e('input[name="optimize_revision"]:checked').val(),auto_draft:e('input[name="optimize_auto_draft"]:checked').val(),trash:e('input[name="optimize_trash"]:checked').val()});this.optimize_flag=!1;var a=e("#optimize_nonce").val();e(".run_optimize").find(".spinner").show(),e.ajax({type:"post",url:ajaxurl,data:{action:"run_optimize",_wp_optimize_nonce:a,selected_action:i},success:function(n){if(e(".run_optimize").find(".spinner").hide(),"faild"==n.status)t.message("faild","<h3>"+n.html+"</h3>");else{var i=document.createElement("div"),a=document.createElement("h3");n.revision&&(e(i).append(e(a).text(e(a).text()+n.revision)),t.countReset("revision")),n.auto_draft&&(e(i).append(e(a).text(e(a).text()+n.auto_draft)),t.countReset("auto_draft")),n.trash&&(e(i).append(e(a).text(e(a).text()+n.trash)),t.countReset("trash")),e(i).length>0&&t.message("optimize",e(i))}this.optimize_flag=!0}})},event:function(){e(document).on("click","#optimize_submit",function(e){t.optimizeSubmit(e)})}};e(function(){window.wpa.optimize=t,wpa.optimize.init()})}(jQuery),function(e){"use strict";var t={import_button:"#tools_option_import",import_file_input:"tools_option_import_file",import_data:"#tools_option_import_data",init:function(){t.event()},event:function(){e(document).on("change","#"+t.import_file_input,function(){var n=new FileReader,i=document.getElementById(t.import_file_input).files[0];n.onload=function(){e(t.import_data).val(n.result)},n.readAsText(i)}),e(document).on("click",t.import_button,function(n){n.preventDefault();var i=e(t.import_data).val();i.length<=0&&(i=e("#import_textarea").val());var a=/^a:.*;}$/;if(!i.match(a))return wpa.message("faild","<h3>更新データが正しくありません</h3>"),!1;var o=e("#tools_option_import_nonce").val();e.ajax({type:"post",url:ajaxurl,data:{action:"wpa_option_import",wp_import_nonce:o,import_data:i}}).done(function(e){return"1"===e?(wpa.message("success"),setTimeout(function(){location.reload()},300),!0):(wpa.message("faild","<h3>更新データが正しくありません</h3>"),!1)})})}};e(function(){wpa.tools=t,wpa.tools.init()})}(jQuery);